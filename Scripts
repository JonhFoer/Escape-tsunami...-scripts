local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Escape Tsunami For Brainrots!",
   LoadingTitle = "Loading Script...",
   LoadingSubtitle = "by jonh foer",
   ConfigurationSaving = {Enabled = true, FolderName = "TsunamiScript", FileName = "Config"},
   KeySystem = false -- Key system officially removed
})

-- TABS
local Tab1 = Window:CreateTab("General", 4483362458)
local Tab2 = Window:CreateTab("Auto", 4483345998)

-- --- TAB 1: GENERAL ---
local Header1 = Tab1:CreateSection("general")

Tab1:CreateButton({
   Name = "Infinite Yield",
   Callback = function()
       loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
   end,
})

local HeaderESP = Tab1:CreateSection("brainrot esp")
_G.SelectedRarities = {"Common"} 
_G.BrainrotESP = false

local function RefreshESP()
    for _, v in pairs(workspace:GetDescendants()) do
        if v.Name == "BrainrotHighlight" then v:Destroy() end
    end
    if not _G.BrainrotESP then return end
    local folder = workspace:FindFirstChild("ActiveBrainrots")
    if folder then
        for _, rarityName in pairs(_G.SelectedRarities) do
            local rarityFolder = folder:FindFirstChild(rarityName)
            if rarityFolder then
                for _, brainrot in pairs(rarityFolder:GetChildren()) do
                    if brainrot.Name == "RenderedBrainrot" then
                        local highlight = Instance.new("Highlight")
                        highlight.Name = "BrainrotHighlight"
                        highlight.FillColor = Color3.fromRGB(0, 255, 127)
                        highlight.Parent = brainrot
                    end
                end
            end
        end
    end
end

Tab1:CreateDropdown({
   Name = "Select ESP Rarities",
   Options = {"Celestial", "Common", "Cosmic", "Divine", "Epic", "Legendary", "Mythical", "Rare", "Secret", "Uncommon"},
   CurrentOption = {"Common"},
   MultipleOptions = true,
   Flag = "RarityDropdown",
   Callback = function(Options)
       _G.SelectedRarities = Options
       if _G.BrainrotESP then RefreshESP() end
   end,
})

Tab1:CreateToggle({
   Name = "Brainrot ESP",
   CurrentValue = false,
   Flag = "EspToggle",
   Callback = function(state)
       _G.BrainrotESP = state
       RefreshESP()
   end,
})

-- --- TAB 2: AUTO ---
local Header2 = Tab2:CreateSection("alerter")
_G.CelestialSoundID = "73087452882886" 

Tab2:CreateToggle({
   Name = "Celestial Alerter",
   CurrentValue = false,
   Flag = "CelestialAlert",
   Callback = function(state)
       _G.CelestialNotifier = state
       local folder = workspace:WaitForChild("ActiveBrainrots"):WaitForChild("Celestial")
       if _G.CelestialNotifier then
           _G.CelestialConnection = folder.ChildAdded:Connect(function(child)
               if child.Name == "RenderedBrainrot" then
                   local sound = Instance.new("Sound", game:GetService("SoundService"))
                   sound.SoundId = "rbxassetid://" .. _G.CelestialSoundID
                   sound:Play()
                   Rayfield:Notify({Title = "CELESTIAL DETECTED!", Content = "A Celestial Brainrot is active!", Duration = 10})
               end
           end)
       else
           if _G.CelestialConnection then _G.CelestialConnection:Disconnect() end
       end
   end,
})

Tab2:CreateInput({
   Name = "Celestial Sound ID",
   PlaceholderText = "Paste ID here...",
   Callback = function(Text) _G.CelestialSoundID = Text end,
})

local Header3 = Tab2:CreateSection("farm")

-- FIXED MONEY COLLECTOR (Strict name: Collect)
Tab2:CreateToggle({
   Name = "Auto collect money",
   CurrentValue = false,
   Flag = "MagicCollect",
   Callback = function(state)
       _G.MagicCollect = state
       task.spawn(function()
           while _G.MagicCollect do
               local root = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
               if root then
                   for _, v in pairs(workspace:GetDescendants()) do
                       if v.Name == "Collect" and v:IsA("BasePart") then
                           firetouchinterest(root, v, 0)
                           task.wait()
                           firetouchinterest(root, v, 1)
                       end
                   end
               end
               task.wait(1)
           end
       end)
   end,
})

-- FIXED COIN PULLER (No Pushing)
Tab2:CreateToggle({
   Name = "Auto collect all coins",
   CurrentValue = false,
   Flag = "CoinPuller",
   Callback = function(state)
       _G.CoinPuller = state
       if _G.CoinPuller then
           task.spawn(function()
               while _G.CoinPuller do
                   local char = game.Players.LocalPlayer.Character
                   local root = char and char:FindFirstChild("HumanoidRootPart")
                   if root then
                       for _, v in pairs(workspace:GetDescendants()) do
                           if v.Name:lower():find("coin") and v:IsA("BasePart") then
                               v.CanCollide = false 
                               v.Anchored = true    
                               v.CFrame = root.CFrame 
                               
                               firetouchinterest(root, v, 0)
                               firetouchinterest(root, v, 1)
                           end
                       end
                   end
                   task.wait(0.1) 
               end
           end)
       end
   end,
})
